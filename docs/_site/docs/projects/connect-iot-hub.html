<!doctype html>

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Connect to Azure IoT Hub - IoT Developer Kits</title>




<meta name="description" content="Connect DevKit to an Azure IoT hub that you create, collect the temperature and humidity data from sensors and send the data to IoT hub.">




<meta name="author" content="MXChip IoT Developer Kit">

<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IoT Developer Kits">
<meta property="og:title" content="Connect to Azure IoT Hub">


  <link rel="canonical" href="http://localhost:4000/azure-iot-developer-kit/docs/projects/connect-iot-hub">
  <meta property="og:url" content="http://localhost:4000/azure-iot-developer-kit/docs/projects/connect-iot-hub">



  <meta property="og:description" content="Connect DevKit to an Azure IoT hub that you create, collect the temperature and humidity data from sensors and send the data to IoT hub.">





  

  



  <meta property="og:image" content="http://localhost:4000/azure-iot-developer-kit/assets/images/projects-iothub.jpg">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-06-29T01:43:31-07:00">






  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/azure-iot-developer-kit",
      "logo": "http://localhost:4000/azure-iot-developer-kit/assets/images/site-logo.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "MXChip IoT Developer Kit",
      "url" : "http://localhost:4000/azure-iot-developer-kit",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/azure-iot-developer-kit/feed.xml" type="application/atom+xml" rel="alternate" title="IoT Developer Kits Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/azure-iot-developer-kit/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://localhost:4000/azure-iot-developer-kit/">IoT Developer Kits</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/azure-iot-developer-kit/docs/get-started/">Docs</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/azure-iot-developer-kit/docs/projects/">Projects</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/azure-iot-developer-kit/versions/">Versions</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://blogs.msdn.microsoft.com/iotdev/">Blog</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    
  





<div class="page__hero"
  style="  "
>
  
    <img src="http://localhost:4000/azure-iot-developer-kit/assets/images/projects-iothub.jpg" alt="Connect to Azure IoT Hub" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Connect to Azure IoT Hub">
    <meta itemprop="description" content="Connect DevKit to an Azure IoT hub that you create, collect the temperature and humidity data from sensors and send the data to IoT hub.">
    <meta itemprop="datePublished" content="June 29, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Connect to Azure IoT Hub
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-columns"></i> On This Page</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#what-you-do" id="markdown-toc-what-you-do">What you do</a></li>
  <li><a href="#what-you-learn" id="markdown-toc-what-you-learn">What you learn</a></li>
  <li><a href="#what-you-need" id="markdown-toc-what-you-need">What you need</a></li>
  <li><a href="#create-an-iot-hub-and-register-a-device-for-mxchip-iot-developer-kit" id="markdown-toc-create-an-iot-hub-and-register-a-device-for-mxchip-iot-developer-kit">Create an IoT hub and register a device for MXChip IoT Developer Kit</a>    <ul>
      <li><a href="#create-an-iot-hub" id="markdown-toc-create-an-iot-hub">Create an IoT hub</a></li>
      <li><a href="#register-a-device-in-the-iot-hub-for-the-your-device" id="markdown-toc-register-a-device-in-the-iot-hub-for-the-your-device">Register a device in the IoT hub for the your device</a></li>
    </ul>
  </li>
  <li><a href="#connect-mxchip-iot-developer-kit-with-your-computer" id="markdown-toc-connect-mxchip-iot-developer-kit-with-your-computer">Connect MXChip IoT Developer Kit with your computer</a></li>
  <li><a href="#collect-sensor-data-and-send-it-to-your-iot-hub" id="markdown-toc-collect-sensor-data-and-send-it-to-your-iot-hub">Collect sensor data and send it to your IoT hub</a>    <ul>
      <li><a href="#get-the-sample-application" id="markdown-toc-get-the-sample-application">Get the sample application</a></li>
      <li><a href="#install-required-libraries" id="markdown-toc-install-required-libraries">Install required libraries</a></li>
      <li><a href="#configure-device-connection-string-to-devkit-windows" id="markdown-toc-configure-device-connection-string-to-devkit-windows">Configure device connection string to DevKit (Windows)</a></li>
      <li><a href="#deploy-the-sample-application-to-mxchip-iot-developer-kit" id="markdown-toc-deploy-the-sample-application-to-mxchip-iot-developer-kit">Deploy the sample application to MXChip IoT Developer Kit</a></li>
      <li><a href="#verify-the-sample-application-is-running-successfully" id="markdown-toc-verify-the-sample-application-is-running-successfully">Verify the sample application is running successfully</a></li>
    </ul>
  </li>
  <li><a href="#problems-and-feedback" id="markdown-toc-problems-and-feedback">Problems and feedback</a></li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next steps</a></li>
</ul>

  </nav>
</aside>

<h2 id="what-you-do">What you do</h2>

<p>Connect DevKit to an Azure IoT hub that you create, collect the temperature and humidity data from sensors and send the data to IoT hub.</p>

<h2 id="what-you-learn">What you learn</h2>

<ul>
  <li>How to create an IoT hub and register a device for MXChip IoT Developer Kit.</li>
  <li>How to collect sensor data by running a sample application on MXChip IoT Developer Kit.</li>
  <li>How to send the sensor data to your IoT hub.</li>
</ul>

<h2 id="what-you-need">What you need</h2>

<ul>
  <li>Finish the <a href="http://localhost:4000/azure-iot-developer-kit/docs/get-started/">Getting Started Guide</a></li>
</ul>

<h2 id="create-an-iot-hub-and-register-a-device-for-mxchip-iot-developer-kit">Create an IoT hub and register a device for MXChip IoT Developer Kit</h2>

<h3 id="create-an-iot-hub">Create an IoT hub</h3>

<ol>
  <li>
    <p>In the <a href="https://portal.azure.com/" target="_blank">Azure portal</a>, click <strong>New</strong> &gt; <strong>Internet of Things</strong> &gt; <strong>IoT Hub</strong>.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-create-azure-iot-hub-portal.png" alt="Create an iot hub in the Azure portal" /></p>
  </li>
  <li>
    <p>In the <strong>IoT hub</strong> pane, enter the following information for your IoT hub:</p>

    <p><strong>Name</strong>: It is the name for your IoT hub. If the name you enter is valid, a green check mark appears.</p>

    <p><strong>Pricing and scale tier</strong>: Select the free F1 tier. This option is sufficient for this demo. See <a href="https://azure.microsoft.com/pricing/details/iot-hub/" target="_blank">pricing and scale tier</a>.</p>

    <p><strong>Resource group</strong>: Create a resource group to host the IoT hub or use an existing one. See <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-portal" target="_blank">Using resource groups to manage your Azure resources</a>.</p>

    <p><strong>Location</strong>: Select the closest location to you where the IoT hub is created.</p>

    <p><strong>Pin the dashboard</strong>: Check this option for easy access to your IoT hub from the dashboard.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-fill-in-fields-for-azure-iot-hub-portal.png" alt="Fill in the fields for creating your Azure IoT hub" /></p>
  </li>
  <li>
    <p>Click <strong>Create</strong>. It could take a few minutes for your IoT hub to be created. You can see the progress in the <strong>Notifications</strong> pane.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-notification-azure-iot-hub-creation-progress-portal.png" alt="See notifications of your IoT hub creation progress" /></p>
  </li>
  <li>
    <p>Once your IoT hub is created, click it from the dashboard. Make a note of the <strong>Hostname</strong>, and then click <strong>Shared access policies</strong>.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-get-azure-iot-hub-hostname-portal.png" alt="Get the hostname of your IoT hub" /></p>
  </li>
  <li>
    <p>In the <strong>Shared access policies</strong> pane, click the <strong>iothubowner</strong> policy, and then make a note of the <strong>Connection string</strong> of your IoT hub. For more information, see <a href="iot-hub-devguide-security.md">Control access to IoT Hub</a>.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-get-azure-iot-hub-connection-string-portal.png" alt="Get your IoT hub connection string" /></p>
  </li>
</ol>

<h3 id="register-a-device-in-the-iot-hub-for-the-your-device">Register a device in the IoT hub for the your device</h3>

<ol>
  <li>
    <p>In the <a href="https://portal.azure.com/" target="_blank">Azure portal</a>, open your IoT hub.</p>
  </li>
  <li>
    <p>Click <strong>Device Explorer</strong>.</p>
  </li>
  <li>
    <p>In the Device Explorer pane, click <strong>Add</strong>, and then enter the following information to create a device in your IoT hub:</p>

    <p><strong>Device ID</strong>: The ID of the new device.</p>

    <p><strong>Authentication Type</strong>: Select <strong>Symmetric Key</strong>.</p>

    <p><strong>Auto Generate Keys</strong>: Check this field.</p>

    <p><strong>Connect device to IoT Hub</strong>: Click <strong>Enable</strong>.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-add-device-in-azure-iot-hub-device-explorer-portal.png" alt="Add a device in the device explorer of your IoT hub" /></p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
  <li>
    <p>After the device is created, open the device in the <strong>Device Explorer</strong> pane.</p>
  </li>
  <li>
    <p>Make a note of the primary key of the device connection string.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-get-device-connection-string-in-device-explorer-portal.png" alt="Get the device connection string" /></p>
  </li>
</ol>

<h2 id="connect-mxchip-iot-developer-kit-with-your-computer">Connect MXChip IoT Developer Kit with your computer</h2>

<p>Use the Micro USB to Type A USB cable to connect MXChip IoT Developer Kit to your computer.</p>

<h2 id="collect-sensor-data-and-send-it-to-your-iot-hub">Collect sensor data and send it to your IoT hub</h2>

<p>In this section, you deploy and run a sample application on MXChip IoT Developer Kit. The sample application blinks the LED on MXChip IoT Developer Kit, and sends the temperature and humidity data collected from the sensor to your IoT hub.</p>

<h3 id="get-the-sample-application">Get the sample application</h3>

<ol>
  <li>
    <p>In Visual Studio Code, press <code class="highlighter-rouge">F1</code> or <code class="highlighter-rouge">Ctrl + Shift + P</code> to open the command palette, and then type <code class="highlighter-rouge">Arduino: Examples</code>.</p>
  </li>
  <li>
    <p>In the <code class="highlighter-rouge">Arduino Examples</code> tab, expand <code class="highlighter-rouge">Examples for MXCHIP AZ3166</code> &gt; <code class="highlighter-rouge">AzureIoTHub</code>, and then click <code class="highlighter-rouge">GetStarted</code>.</p>
  </li>
</ol>

<h3 id="install-required-libraries">Install required libraries</h3>

<ol>
  <li>
    <p>In the Visual Studio Code, press <code class="highlighter-rouge">F1</code> or <code class="highlighter-rouge">Ctrl + Shift + P</code> to open command palette, type <strong>Arduino: Libraries Manager</strong>.</p>
  </li>
  <li>
    <p>Search for the <code class="highlighter-rouge">ArduinoJson</code> library and click <strong>Install</strong>.</p>
  </li>
</ol>

<h3 id="configure-device-connection-string-to-devkit-windows">Configure device connection string to DevKit (Windows)</h3>

<ol>
  <li>
    <p>Download and install <a href="http://www.putty.org/" target="_blank">PuTTY</a>.</p>
  </li>
  <li>Configure PuTTY with the following settings in the sequence they are listed:
    <ul>
      <li><strong>Connection type</strong>: select <strong>Serial</strong>.</li>
      <li><strong>Serial line</strong>: Enter the port that MXChip IoT Developer Kit uses to connect to your computer. For example, you enter <code class="highlighter-rouge">COM5</code>. You can find the port on the status bar of Visual Studio Code.</li>
      <li><strong>Speed</strong>: Enter <code class="highlighter-rouge">115200</code>.</li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Open</strong> to open a PuTTY command-line window.</p>

    <p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-putty-config.png" alt="putty-config" /></p>
  </li>
  <li>
    <p>On MXChip IoT Developer Kit, press and hold button A, press the Reset button, and then release button A.
This makes the PuTTY command-line to start with a <code class="highlighter-rouge">#</code> prompt.</p>
  </li>
  <li>Configure the device connection string for MXChip IoT Developer Kit by running the following command in the PuTTY command-line window:
    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>set_az_iothub <span class="o">[</span>device connection string]
</code></pre>
    </div>

    <p>If the configuration is successful, the following information is displayed:</p>
    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>INFO: Set Azure Iot hub connection string successfully.
</code></pre>
    </div>
  </li>
  <li>Close the PuTTY command-line window.</li>
</ol>

<h3 id="deploy-the-sample-application-to-mxchip-iot-developer-kit">Deploy the sample application to MXChip IoT Developer Kit</h3>

<ol>
  <li>
    <p>In Visual Studio Code, click <code class="highlighter-rouge">COM&lt;Port&gt;</code> on the status bar, and then click <code class="highlighter-rouge">COM&lt;Port&gt; STMicroelectronics</code> in the command palette.</p>
  </li>
  <li>
    <p>Press <code class="highlighter-rouge">F1</code> or <code class="highlighter-rouge">Ctrl + Shift + P</code>, type <code class="highlighter-rouge">arduino:upload</code>, and then click <code class="highlighter-rouge">Arduino: Upload</code> to build and deploy the sample application to MXChip IoT Developer Kit.</p>
  </li>
</ol>

<h3 id="verify-the-sample-application-is-running-successfully">Verify the sample application is running successfully</h3>

<p>In Visual Studio Code, click the power plug icon in the status bar to open the Serial Monitor.</p>

<p>The sample application is running successfully when you see the following results:</p>

<ul>
  <li>The Serial Monitor dispalys the same information as the content in the screenshot below.</li>
  <li>The LED on MXChip IoT Developer Kit is blinking.</li>
</ul>

<p><img src="http://localhost:4000/azure-iot-developer-kit/assets/images/happy-path-vscode-final-output.png" alt="Final output in VS Code" /></p>

<h2 id="problems-and-feedback">Problems and feedback</h2>

<p>You can find <a href="http://localhost:4000/azure-iot-developer-kit/docs/faq/">FAQs</a> if you encounter problems or reach out to us from the channels below.</p>

<h2 id="next-steps">Next steps</h2>

<p>You have successfully connected a MXChip IoT Developer Kit to your IoT hub, and sent the captured sensor data to your IoT hub.</p>

<p>To continue getting started with IoT Hub and to explore other IoT scenarios, see:</p>

<ul>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-explorer-cloud-device-messaging" target="_blank">Manage cloud device messaging with iothub-explorer</a></li>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-store-data-in-azure-table-storage" target="_blank">Save IoT Hub messages to Azure data storage</a></li>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-live-data-visualization-in-power-bi" target="_blank">Use Power BI to visualize real-time sensor data from Azure IoT Hub</a></li>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-live-data-visualization-in-web-apps" target="_blank">Use Azure Web Apps to visualize real-time sensor data from Azure IoT Hub</a></li>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-weather-forecast-machine-learning" target="_blank">Weather forecast using the sensor data from your IoT hub in Azure Machine Learning</a></li>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-device-management-iothub-explorer" target="_blank">Device management with iothub-explorer</a></li>
  <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-monitoring-notifications-with-azure-logic-apps" target="_blank">Remote monitoring and notifications with ​​Logic ​​Apps</a></li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-06-29T01:43:31-07:00">June 29, 2017</time></p>
        
      </footer>

      <section class="page__share">
    <p>Reach us at</p>
  <a href="http://gitter.im/Microsoft/azure-iot-developer-kit">
    <img src="https://badges.gitter.im/iot-devkit.svg" alt="Join Gitter chat" style="height:25px">
  </a>

  <p>or share on</p>
  
  <a href="https://twitter.com/intent/tweet?text=Connect to Azure IoT Hub http://localhost:4000/azure-iot-developer-kit/docs/projects/connect-iot-hub" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/azure-iot-developer-kit/docs/projects/connect-iot-hub" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/azure-iot-developer-kit/docs/projects/connect-iot-hub" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="http://localhost:4000/azure-iot-developer-kit/docs/projects/mqtt-helloworld/" class="pagination--pager" title="MQTT HelloWorld
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
          <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/Microsoft/azure-iot-developer-kit"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/azure-iot-developer-kit/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">Copyright &copy; 2017 Microsoft Corp.</div>
      </footer>
    </div>

    <script src="http://localhost:4000/azure-iot-developer-kit/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98097460-1', 'auto');
  ga('send', 'pageview');
</script>







  </body>
</html>
